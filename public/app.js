!function(){angular.module("theGame",["ngResource","ui.router"]),angular.module("theGame",["ngResource","ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,n,t){t.html5Mode(!0),n.otherwise("/accueil")}])}(),function(){angular.module("theGame").config(["$stateProvider",function(e){e.state("site",{"abstract":!0,resolve:{user:["LoginService",function(e){return e.currentUser().then(function(e){return e})}]}})}])}(),function(){angular.module("theGame").config(["$stateProvider",function(e){e.state("site.signup",{parent:"site",url:"/signup",views:{"content@":{templateUrl:"js/app/signup/signup.html",controller:"SignupController"}},resolve:{authenticated:["$q","$state","user",function(e,n,t){var r=e.defer();return t.isAuthenticated?(n.go("site.accueil"),r.reject(!1)):r.resolve(!0),r.promise}]}})}])}(),function(){angular.module("theGame").controller("SignupController",["$scope","$state","$resource","user","SignupService",function(e,n,t,r,o){e.userInfo={username:"",password:"",passwordConfirmation:""},e.erreur="",e.signup=function(){o.signup(e.userInfo).then(function(e){n.go("site.login",{},{reload:!0})},function(n){e.erreur="Erreur !"})}}])}(),function(){angular.module("theGame").factory("UserService",["$q","UserResource",function(e,n){var t;return{user:function(){var r=e.defer();return t?r.resolve(t):n.get().then(function(e){t=e,r.resolve(t)}),r.promise},login:function(r){var o=e.defer();return n.login().then(function(e){t=e,o.resolve(t)}),o.promise}}}])}(),function(){angular.module("theGame").factory("SignupService",["$q","SignupResource",function(e,n){return{signup:function(t){var r=e.defer();return n.signup(t).$promise.then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}])}(),function(){angular.module("theGame").factory("LoginService",["$q","LoginResource",function(e,n){var t={isAuthenticated:!1,name:void 0};return{currentUser:function(){var r=e.defer();return t.isAuthenticated?r.resolve(t):n.get().$promise.then(function(e){e.isAuthenticated&&(t.isAuthenticated=!0,t.name=e.user.username),r.resolve(t)}),r.promise},login:function(t){var r=e.defer();return n.login(t).$promise.then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},logout:function(){var r=e.defer();return n.logout().$promise.then(function(e){t={isAuthenticated:!1,name:void 0},r.resolve(!0)}),r.promise}}}])}(),function(){angular.module("theGame").factory("UserResource",["$resource","$location","$q",function(e,n,t){return e("/api/user/:id",{id:"@id"},{get:{method:"GET"}})}])}(),function(){angular.module("theGame").factory("SignupResource",["$resource","$location","$q",function(e,n,t){return e("/api/signup",{},{signup:{method:"POST"}})}])}(),function(){angular.module("theGame").factory("LoginResource",["$resource","$location","$q",function(e,n,t){return e("/api/login",{},{login:{method:"POST"},logout:{method:"DELETE"}})}])}(),function(){angular.module("theGame").config(["$stateProvider",function(e){e.state("site.login",{parent:"site",url:"/login",views:{"content@":{templateUrl:"js/app/login/login.html",controller:"LoginController"}},resolve:{authenticated:["$q","$state","user",function(e,n,t){var r=e.defer();return t.isAuthenticated?(n.go("site.accueil"),r.reject(!1)):r.resolve(!0),r.promise}]}})}])}(),function(){angular.module("theGame").controller("LoginController",["$scope","$state","$resource","user","LoginService",function(e,n,t,r,o){e.userInfo={username:"",password:""},e.erreur="",e.login=function(){o.login(e.userInfo).then(function(e){n.go("site.accueil",{},{reload:!0})},function(n){e.erreur="Erreur !"})}}])}(),function(){angular.module("theGame").config(["$stateProvider",function(e){e.state("site.accueil",{parent:"site",url:"/accueil",views:{"content@":{templateUrl:"js/app/accueil/accueil.html",controller:"AccueilController"}}})}])}(),function(){angular.module("theGame").controller("AccueilController",["$scope","$state","LoginService","user",function(e,n,t,r){e.user=r,e.logout=function(){t.logout().then(function(){n.reload()})}}])}(),function(){angular.module("theGame").constant("conf",{url:"http://localhost",port:"8085"})}();